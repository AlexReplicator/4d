# 4D FPS Slice (WebGL2)

Минимальный 4D-шутер от первого лица с рендерингом 3D-среза 4D-сцены (raymarching). Управляйте камерой в 3D и вращайте «срез» по плоскостям XW/YW/ZW.

## Запуск

- Сервер уже запущен в фоне на порту 8000. Откройте URL: http://localhost:8000/index.html
- Если понадобится запустить вручную: в корне проекта выполните:
  - `python3 -m http.server 8000`
  - затем откройте http://localhost:8000/index.html

## Управление

- Движение: W A S D
- Вверх/вниз: Space / Ctrl
- Бег: Shift
- Взгляд: мышь (клик по канвасу — захват курсора, Esc — освобождение)
- Срез по W: [ и ]
- Вращения 4D: U/J (XW), I/K (YW), O/L (ZW)
- Сброс позиции/углов/параметров: R
## Настройки качества (HUD)

По умолчанию включён высокий профиль качества (High):
- Scale: 150%
- Steps: 256
- Epsilon: 0.0005

Описание ползунков:
- Scale — масштаб внутреннего рендера (меняет реальное разрешение канваса, не CSS‑масштаб). Больше — изображение чётче, но нагрузка выше.
- Steps — максимум шагов итераций ray marching. Больше — точнее поверхность и меньше артефактов «пролёта», но медленнее.
- Epsilon — порог попадания на поверхность и шаг для оценки нормали. Меньше — точнее и детальнее, но может шуметь и снижать FPS.

Рекомендованные пресеты:
- High (по умолчанию): Scale 150%, Steps 256, Epsilon 0.0005 — лучшее качество.
- Balanced: Scale 100%, Steps 160, Epsilon 0.001 — баланс качества и производительности.
- Fast: Scale 70–80%, Steps 128, Epsilon 0.002–0.003 — максимум FPS на слабых GPU.

Как изменить значения по умолчанию:
- В интерфейсе: правьте атрибуты value у ползунков в [index.html](index.html).
- В коде: начальные значения переменных renderScale, maxSteps, eps в [src/main.js](src/main.js) синхронны значениям ползунков.

## Файлы проекта

- Главная страница: [index.html](index.html)
- Стили HUD/прицела: [styles.css](styles.css)
- WebGL2 + шейдерный рендер: [src/main.js](src/main.js)

## Требования

- Современный браузер с поддержкой WebGL2 и аппаратного ускорения (Chrome, Firefox).
- Разрешения мыши для Pointer Lock (после клика по канвасу).

## Советы по производительности

- Если FPS низкий, уменьшите размер окна браузера.
- Закройте лишние вкладки/приложения с активным 3D.
- Включите аппаратное ускорение в настройках браузера.

## Остановка фонового сервера

- Посмотреть PID: `cat /tmp/4d_http.pid`
- Остановить: `kill $(cat /tmp/4d_http.pid)`  или  `pkill -f "http.server 8000"`
- Лог сервера: `/tmp/4d_http.log`

## Дальнейшие планы (roadmap)

- Переключаемое качество (масштаб рендера) и адаптивный шаг маршинга.
- Улучшенное освещение, тени и ambient occlusion.
- Коллизии и навигация по сцене, простые цели/интеракция.
- Экспорт в PWA для запуска оффлайн.